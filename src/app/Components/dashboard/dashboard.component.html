<!-- Dashboard Page - Semantic HTML -->
<div class="dashboard-container">

  <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow" role="navigation" aria-label="Navegación principal">
    <div class="container">
      <a class="navbar-brand" href="#" aria-label="Ir al inicio del dashboard">
        <i class="fas fa-tachometer-alt me-2" aria-hidden="true"></i>
        Dashboard
      </a>
      
      <div class="navbar-nav ms-auto">
        <div class="nav-item dropdown">
          <button 
            class="nav-link dropdown-toggle d-flex align-items-center btn btn-link text-white border-0" 
            type="button"
            data-bs-toggle="dropdown" 
            aria-expanded="false"
            aria-haspopup="true"
            [attr.aria-label]="'Menú de usuario: ' + (user?.nombreUsuario || user?.email)">
            <i class="fas fa-user-circle me-2" aria-hidden="true"></i>
            <span>{{ user?.nombreUsuario || user?.email }}</span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="user-menu">
            <li>
              <button class="dropdown-item" type="button" (click)="viewProfile()">
                <i class="fas fa-user me-2" aria-hidden="true"></i>
                Perfil
              </button>
            </li>
            <li>
              <button class="dropdown-item" type="button" (click)="viewSettings()">
                <i class="fas fa-cog me-2" aria-hidden="true"></i>
                Configuración
              </button>
            </li>
            <li><hr class="dropdown-divider" role="separator"></li>
            <li>
              <button class="dropdown-item text-danger" type="button" (click)="logout()">
                <i class="fas fa-sign-out-alt me-2" aria-hidden="true"></i>
                Cerrar Sesión
              </button>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <main class="main-content" role="main">
    <div class="container mt-4">
      <!-- Welcome Section -->
      <section class="welcome-section mb-4" aria-labelledby="welcome-title">
        <div class="row">
          <div class="col-12">
            <article class="card bg-primary text-white welcome-card">
              <div class="card-body">
                <div class="row align-items-center">
                  <div class="col-md-8">
                    <header>
                      <h1 id="welcome-title" class="h2 mb-1">
                        ¡Bienvenido de vuelta, {{ user?.nombreUsuario || 'Usuario' }}!
                      </h1>
                      <p class="mb-0 opacity-75">
                        Es un gusto tenerte aquí. Aquí tienes un resumen de tu cuenta.
                      </p>
                    </header>
                  </div>
                  <div class="col-md-4 text-center">
                    <i class="fas fa-user-check fa-3x opacity-75" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
            </article>
          </div>
        </div>
      </section>

      <section class="stats-section mb-4" aria-labelledby="stats-title">
        <h2 id="stats-title" class="h3 mb-3">Estadísticas</h2>
        <div class="row g-4">
          <div class="col-xl-3 col-md-6">
            <article class="card stat-card h-100">
              <div class="card-body text-center">
                <div class="stat-icon bg-primary bg-gradient rounded-circle mb-3 mx-auto">
                  <i class="fas fa-calendar-check text-white" aria-hidden="true"></i>
                </div>
                <h3 class="stat-number h1 mb-1">{{ stats.sesionesActivas }}</h3>
                <p class="stat-label text-muted mb-0">Sesiones Activas</p>
              </div>
            </article>
          </div>
          
          <div class="col-xl-3 col-md-6">
            <article class="card stat-card h-100">
              <div class="card-body text-center">
                <div class="stat-icon bg-success bg-gradient rounded-circle mb-3 mx-auto">
                  <i class="fas fa-chart-line text-white" aria-hidden="true"></i>
                </div>
                <h3 class="stat-number h1 mb-1">{{ stats.actividadDiaria }}</h3>
                <p class="stat-label text-muted mb-0">Actividad Diaria</p>
              </div>
            </article>
          </div>
          
          <div class="col-xl-3 col-md-6">
            <article class="card stat-card h-100">
              <div class="card-body text-center">
                <div class="stat-icon bg-warning bg-gradient rounded-circle mb-3 mx-auto">
                  <i class="fas fa-bell text-white" aria-hidden="true"></i>
                </div>
                <h3 class="stat-number h1 mb-1">{{ stats.notificaciones }}</h3>
                <p class="stat-label text-muted mb-0">Notificaciones</p>
              </div>
            </article>
          </div>
          
          <div class="col-xl-3 col-md-6">
            <article class="card stat-card h-100">
              <div class="card-body text-center">
                <div class="stat-icon bg-info bg-gradient rounded-circle mb-3 mx-auto">
                  <i class="fas fa-tasks text-white" aria-hidden="true"></i>
                </div>
                <h3 class="stat-number h1 mb-1">{{ stats.tareasCompletadas }}</h3>
                <p class="stat-label text-muted mb-0">Tareas Completadas</p>
              </div>
            </article>
          </div>
        </div>
      </section>

      <section class="user-info-section mb-4" aria-labelledby="user-info-title">
        <div class="row">
          <div class="col-lg-8">
            <article class="card info-card h-100">
              <div class="card-header">
                <h2 id="user-info-title" class="h4 mb-0">
                  <i class="fas fa-user-circle me-2" aria-hidden="true"></i>
                  Información del Usuario
                </h2>
              </div>
              <div class="card-body">
                <dl class="user-details row">
                  <dt class="col-sm-4">ID Usuario:</dt>
                  <dd class="col-sm-8">{{ user?.id || 'No disponible' }}</dd>
                  
                  <dt class="col-sm-4">Email:</dt>
                  <dd class="col-sm-8">{{ user?.email || 'No disponible' }}</dd>
                  
                  <dt class="col-sm-4">Nombre de Usuario:</dt>
                  <dd class="col-sm-8">{{ user?.nombreUsuario || 'No disponible' }}</dd>
                  
                  <dt class="col-sm-4">Estado:</dt>
                  <dd class="col-sm-8">
                    <span class="badge bg-success">
                      <i class="fas fa-check-circle me-1" aria-hidden="true"></i>
                      Activo
                    </span>
                  </dd>
                  
                  <dt class="col-sm-4">Última conexión:</dt>
                  <dd class="col-sm-8">{{ currentDate | date:'medium':'es' }}</dd>
                </dl>
              </div>
            </article>
          </div>
          
          <div class="col-lg-4">
            <aside class="card actions-card h-100" role="complementary" aria-labelledby="quick-actions-title">
              <div class="card-header">
                <h2 id="quick-actions-title" class="h4 mb-0">
                  <i class="fas fa-bolt me-2" aria-hidden="true"></i>
                  Acciones Rápidas
                </h2>
              </div>
              <div class="card-body">
                <div class="d-grid gap-2">
                  <button class="btn btn-outline-primary" type="button" (click)="viewProfile()">
                    <i class="fas fa-user-edit me-2" aria-hidden="true"></i>
                    Editar Perfil
                  </button>
                  <button class="btn btn-outline-secondary" type="button" (click)="viewSettings()">
                    <i class="fas fa-cogs me-2" aria-hidden="true"></i>
                    Configuraciones
                  </button>
                  <button class="btn btn-outline-info" type="button" (click)="viewReports()">
                    <i class="fas fa-chart-bar me-2" aria-hidden="true"></i>
                    Ver Reportes
                  </button>
                  <hr>
                  <button class="btn btn-outline-danger" type="button" (click)="logout()">
                    <i class="fas fa-sign-out-alt me-2" aria-hidden="true"></i>
                    Cerrar Sesión
                  </button>
                </div>
              </div>
            </aside>
          </div>
        </div>
      </section>

      <section class="activity-section" aria-labelledby="activity-title">
        <div class="row">
          <div class="col-12">
            <article class="card">
              <div class="card-header">
                <h2 id="activity-title" class="h4 mb-0">
                  <i class="fas fa-clock me-2" aria-hidden="true"></i>
                  Actividad Reciente
                </h2>
              </div>
              <div class="card-body">
                <div *ngIf="recentActivity && recentActivity.length > 0; else noActivity">
                  <ul class="list-group list-group-flush">
                    <li *ngFor="let activity of recentActivity; trackBy: trackByActivityId" 
                        class="list-group-item d-flex align-items-center">
                      <div class="activity-icon me-3">
                        <i class="fas fa-circle text-primary" aria-hidden="true"></i>
                      </div>
                      <div class="activity-content flex-grow-1">
                        <div class="activity-description">{{ activity.description }}</div>
                        <small class="text-muted">{{ activity.timestamp | date:'short':'es' }}</small>
                      </div>
                    </li>
                  </ul>
                </div>
                <ng-template #noActivity>
                  <div class="text-center py-4">
                    <i class="fas fa-history fa-3x text-muted mb-3" aria-hidden="true"></i>
                    <p class="text-muted">No hay actividad reciente que mostrar.</p>
                  </div>
                </ng-template>
              </div>
            </article>
          </div>
        </div>
      </section>
    </div>
  </main>
</div>
